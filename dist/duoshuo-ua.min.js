!function(){function n(n,i){var r=null,t=null;return i.some(function(i){return i[1].some(function(e){var o;return e[0].slice?e[0].some(function(i){return o=n.match(i),!!o}):o=n.match(e[0]),o?(r=e[1]?e[1](o):o[0],t=i[0],!0):!1})}),[r,t]}function i(n){return n[0].replace("/"," ")}function r(r){var t,e=[["windows",[[/Windows Phone(?: OS)? ?([^; )]*)/i],[/Windows ([^;)]*)/i,function(n){var i={"4.90":"ME","NT3.51":"NT 3.11","NT4.0":"NT 4.0","NT 5.0":"2000","NT 5.1":"XP","NT 5.2":"XP","NT 6.0":"Vista","NT 6.1":"7","NT 6.2":"8","NT 6.3":"8.1","NT 6.4":"10",ARM:"RT"}[n[1]];return"Windows"+(i?" "+i:"山寨版")}],[/\bWindows\b/i,function(n){return n[0]+"超级山寨版"}]]],["mac",[[/iPhone|iPod|iPad/i],[/Mac OS X/i]]],["android",[[/Android ?([^; )]*)/i]]],["linux",[[/Linux/i]]]],o=[["opera",[[/Opera Mini\/\d+/i,i],[[/OPR\/(\S+)/i,/Presto\/.*?Version\/(\S+)/i],function(n){return"Opera "+n[1]}]]],["maxthon",[[/Maxthon\/(\S+)/i,i]]],["vivaldi",[[/Vivaldi\/(\S+)/i,i]]],["chrome",[[/Chrome\/(\S+)/i,i]]],["uc",[[/UCBrowser\/(\S+)/i,function(n){return"UC "+n[1]}]]],["safari",[[/Version\/(\S+) .*?Safari\//i,function(n){return"Safari "+n[1]}]]],["firefox",[[/Firefox\/(\S+)/i,i]]],["ie",[[/MSIE (\d+)\.0/i,function(n){return"Internet Explorer "+n[1]}],[/Trident\/(\d+)\.0/i,function(n){return"Internet Explorer "+(parseInt(n[1])+4)}]]]],s={os:"山寨系统",os_cls:"other",br:"山寨浏览器",br_cls:"other"};return t=n(r,e),t[0]&&(s.os=t[0],s.os_cls=t[1]),t=n(r,o),t[0]&&(s.br=t[0],s.br_cls=t[1]),s}function t(n){var i=n.agent;return'<div class="ds-os ds-os-'+i.os_cls+'">'+i.os+'</div><div class="ds-br ds-br-'+i.br_cls+'">'+i.br+"</div>"+(n.webmaster?"<div class=ds-webmaster>站长</div>":"")}function e(n,i){var t,e=i[0],o=duoshuoQuery.myIds||[];1==i.length&&(e=e.post),n.agent=r(e.agent),t=e.author_id,o.indexOf||(o=[o]),n.webmaster=o.indexOf(t)<0?0:t}function o(n){var i=n.result,r=i.indexOf('<div class="ds-comment-header">'),e=i.indexOf("</div>",r),o=duoshuoQuery.getUAString||t;n.result=i.slice(0,e)+o(n)+i.slice(e)}function s(){var n=DUOSHUO.templates.post;DUOSHUO.templates.post=function(){var i={},r=arguments;return e.call(this,i,r),i.result=n.apply(this,r),o.call(this,i,r),i.result}}function u(n,i,r){function t(){var n=r;n&&(r=null,n())}var e=void 0;n[i]?t():Object.defineProperty(n,i,{get:function(){return e},set:function(n){e=n,t()},configurable:!0})}function a(n,i,r){function t(){u(n,e,function(){n=n[e],(e=i.shift())?t():r()})}var e=i.shift();t()}a(window,["DUOSHUO","templates","post"],s)}();