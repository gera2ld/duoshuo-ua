(function(){function r(r){var n=s.parse(r.agent);return'<div class="ds-os">'+s.getString(n.os)+'</div><div class="ds-br">'+s.getString(n.browser)+"</div>"+(r.webmaster?"<div class=ds-webmaster>站长</div>":"")}function n(r,n){var i=duoshuoQuery.myIds||[],e=n[0];1==n.length&&(e=e.post),r.agent=e.agent;var t=e.author_id;i.pop||(i=[i]),r.webmaster=i.indexOf(t)<0?0:t}function i(n){var i=n.result,e=i.indexOf('<div class="ds-comment-header">'),t=i.indexOf("</div>",e),o=duoshuoQuery.getUAString||r;n.result=i.slice(0,t)+o(n)+i.slice(t)}function e(){var r=DUOSHUO.templates.post;DUOSHUO.templates.post=function(){var e={},t=arguments;return n.call(this,e,t),e.result=r.apply(this,t),i.call(this,e,t),e.result},DUOSHUO.UAParser=s}function t(r,n,i){function e(){var r=i;r&&(i=null,r())}var t;r[n]?e():Object.defineProperty(r,n,{get:function(){return t},set:function(r){t=r,e()},configurable:!0})}function o(r,n,i){function e(){t(r,o,function(){r=r[o],(o=n.shift())?e():i()})}var o=n.shift();e()}!function(r){function n(r,n){var i={};return n.forEach(function(n,e){var t=r[e+1];Array.isArray(n)?i[n[0]]="function"==typeof n[1]?n[1](t,n[2]):n[1]:i[n]=t}),i}function i(r){var n=r.name;return r.version&&(n+=" "+r.version),n}function e(r){var i={};for(var e in d)d[e].some(function(t){var o=t[0],s=t[1];return Array.isArray(o)||(o=[o]),o.some(function(t){var o=r.match(t);return o?(i[e]=n(o,s),!0):void 0})});return i}var t={reg:function(r,n){return r.replace(n[0],n[1])},str:function(r,n){return r in n?n[r]:n[""]},ieVer:function(r){return parseInt(r,10)+4}},o={winVer:{"4.90":"ME","NT3.51":"NT 3.11","NT4.0":"NT 4.0","NT 5.0":"2000","NT 5.1":"XP","NT 5.2":"XP","NT 6.0":"Vista","NT 6.1":"7","NT 6.2":"8","NT 6.3":"8.1","NT 6.4":"10","NT 10.0":"10",ARM:"RT","":"山寨版"}},s="name",a="version",u="cls",c=[u,"windows"],d={os:[[/(Windows Phone)(?: OS)? ?([^; )]*)/i,[s,a,c]],[/(Windows) ([^;)]*)/i,[s,[a,t.str,o.winVer],c]],[/\b(Windows)\b/i,[s,[a,"超级山寨版"],c]],[/(iPhone|iPod|iPad|Mac OS X)/i,[s,[u,"mac"]]],[/(Android) ?([^; )]*)/i,[s,a,[u,"android"]]],[/(Linux)/i,[s,[u,"linux"]]],[/()/i,[[s,"山寨操作系统"],[u,"other"]]]],browser:[[/(Opera Mini)\/(\d+)/i,[s,a]],[[/(OPR)\/(\S+)/i,/(Presto)\/.*?Version\/(\S+)/i],[[s,"Opera"],a]],[[/(Maxthon)\/(\S+)/i,/(Vivaldi)\/(\S+)/i,/(Chrome)\/(\S+)/i],[s,a]],[/(UC|QQ)Browser\/(\S+)/i,[[s,t.reg,[/$/,"浏览器"]],a]],[/Version\/(\S+) .*?(Safari)\//i,[a,s]],[/(Firefox)\/(\S+)/i,[s,a]],[/MS(IE) (\d+)\.0/i,[[s,"Internet Explorer"],a]],[/(Trident)\/(\d+)\.0/i,[[s,"Internet Explorer"],[a,t.ieVer]]],[/()/i,[[s,"山寨浏览器"]]]]};r.UAParser={parse:e,getString:i}}(this);var s=this.UAParser;o(window,["DUOSHUO","templates","post"],e)}).call({});