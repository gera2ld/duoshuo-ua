/**
 * Duoshuo UA Plugin - 集成版
 * 此版本集成轻量级的ua-parser但不集成CSS，提供默认的UA显示方案
 * @version v1.0.4
 * @license MIT
 * @author Gerald <gera2ld@163.com>
 */
!function(){function r(){return""}function n(r,n){var i=duoshuoQuery.myIds||[],t=n[0];1==n.length&&(t=t.post),r.agent=t.agent;var e=t.author_id;i.pop||(i=[i]),r.webmaster=i.indexOf(e)<0?0:e}function i(n){var i=n.result,t=i.indexOf('<div class="ds-comment-header">'),e=i.indexOf("</div>",t),o=duoshuoQuery.getUAString||s.getUAString||r;n.result=i.slice(0,e)+o.call(s,n)+i.slice(e)}function t(){var r=DUOSHUO.templates.post;DUOSHUO.templates.post=function(){var t={},e=arguments;return n.call(this,t,e),t.result=r.apply(this,e),i.call(this,t,e),t.result}}function e(r,n,i){function t(){var r=i;r&&(i=null,r())}var e;r[n]?t():Object.defineProperty(r,n,{get:function(){return e},set:function(r){e=r,t()},configurable:!0})}function o(r,n,i){function t(){e(r,o,function(){r=r[o],(o=n.shift())?t():i()})}var o=n.shift();t()}var s=this;o(window,["DUOSHUO","templates","post"],t),!function(r){function n(r,n){var i={};return n.forEach(function(n,t){var e=r[t+1];Array.isArray(n)?i[n[0]]="function"==typeof n[1]?n[1](e,n[2]):n[1]:i[n]=e}),i}function i(r){var n=r.name;return r.version&&(n+=" "+r.version),n}function t(r){var i={};for(var t in d)d[t].some(function(e){var o=e[0],s=e[1];return Array.isArray(o)||(o=[o]),o.some(function(e){var o=r.match(e);return o?(i[t]=n(o,s),!0):void 0})});return i}var e={reg:function(r,n){return r.replace(n[0],n[1])},str:function(r,n){return r in n?n[r]:n[""]},ieVer:function(r){return parseInt(r,10)+4}},o={winVer:{"4.90":"ME","NT3.51":"NT 3.11","NT4.0":"NT 4.0","NT 5.0":"2000","NT 5.1":"XP","NT 5.2":"XP","NT 6.0":"Vista","NT 6.1":"7","NT 6.2":"8","NT 6.3":"8.1","NT 6.4":"10","NT 10.0":"10",ARM:"RT","":"山寨版"}},s="name",a="version",u="cls",c=[u,"windows"],d={os:[[/(Windows Phone)(?: OS)? ?([^; )]*)/i,[s,a,c]],[/(Windows) ([^;)]*)/i,[s,[a,e.str,o.winVer],c]],[/\b(Windows)\b/i,[s,[a,"超级山寨版"],c]],[/(iPhone|iPod|iPad|Mac OS X)/i,[s,[u,"mac"]]],[/(Android) ?([^; )]*)/i,[s,a,[u,"android"]]],[/(Ubuntu|Linux)/i,[s,[u,"linux"]]],[/()/i,[[s,"山寨操作系统"],[u,"other"]]]],browser:[[/(Opera Mini)\/(\d+)/i,[s,a]],[[/(OPR)\/(\S+)/i,/(Presto)\/.*?Version\/(\S+)/i],[[s,"Opera"],a]],[/(Maxthon|Vivaldi|Chrome)\/(\S+)/i,[s,a]],[/(UC|QQ)Browser\/(\S+)/i,[[s,e.reg,[/$/,"浏览器"]],a]],[/Version\/(\S+) .*?(Safari)\//i,[a,s]],[/(Firefox)\/(\S+)/i,[s,a]],[/MS(IE) (\d+)\.0/i,[[s,"Internet Explorer"],a]],[/(Trident)\/(\d+)\.0/i,[[s,"Internet Explorer"],[a,e.ieVer]]],[/()/i,[[s,"山寨浏览器"]]]]};r.UAParser={parse:t,getString:i}}(this),!function(r){var n=r.UAParser;r.getUAString=function(r){var i=n.parse(r.agent);return'<div class="ds-os">'+n.getString(i.os)+'</div><div class="ds-br">'+n.getString(i.browser)+"</div>"+(r.webmaster?"<div class=ds-webmaster>站长</div>":"")}}(this)}.call({});